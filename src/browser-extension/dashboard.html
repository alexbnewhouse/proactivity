<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
    }

    .task-header-actions {
      display: flex;
      gap: var(--space-3);
      align-items: center;
    }ent="width=device-width, initial-scale=1.0">
  <title>Proactivity Dashboard</title>
  <link rel="stylesheet" href="design-system.css">
  <style>
    /* Dashboard-specific styles */
    .dashboard {
      min-height: 100vh;
      background-color: var(--color-gray-25);
    }

    .dashboard-header {
      background-color: var(--color-gray-0);
      border-bottom: 1px solid var(--color-gray-200);
      padding: var(--space-4) var(--space-6);
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: var(--z-sticky);
    }

    .dashboard-title {
      margin: 0;
      color: var(--color-gray-900);
    }

    .dashboard-actions {
      display: flex;
      gap: var(--space-3);
      align-items: center;
    }

    .view-switcher {
      display: flex;
      background-color: var(--color-gray-100);
      border-radius: var(--radius-md);
      padding: var(--space-1);
    }

    .view-switcher button {
      padding: var(--space-2) var(--space-3);
      border: none;
      background: transparent;
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .view-switcher button.active {
      background-color: var(--color-gray-0);
      box-shadow: var(--shadow-sm);
    }

    .dashboard-content {
      padding: var(--space-6);
      max-width: 1200px;
      margin: 0 auto;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
      margin-bottom: var(--space-8);
    }

    .stat-card {
      text-align: center;
    }

    .stat-card .card-body {
      padding: var(--space-6);
    }

    .stat-number {
      font-size: var(--text-3xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-primary-600);
      margin-bottom: var(--space-2);
    }

    .stat-label {
      font-size: var(--text-sm);
      color: var(--color-gray-500);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: var(--space-6);
      margin-bottom: var(--space-8);
    }

    .tasks-section {
      display: flex;
      flex-direction: column;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
    }

    .task-input-row {
      margin-bottom: var(--space-4);
    }

    .task-input-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 100px 140px 140px auto auto;
      gap: var(--space-3);
      align-items: center;
    }

    @media (max-width: 768px) {
      .task-input-grid {
        grid-template-columns: 1fr;
        gap: var(--space-2);
      }
    }

    .task-input-row .input {
      flex: 1;
    }

    /* Task Views */
    .tasks-view {
      min-height: 400px;
    }

    .tasks-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .task-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-4);
      background-color: var(--color-gray-0);
      border: 1px solid var(--color-gray-200);
      border-radius: var(--radius-md);
      transition: var(--transition-fast);
    }

    .task-item:hover {
      border-color: var(--color-gray-300);
      box-shadow: var(--shadow-sm);
    }

    .task-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid var(--color-gray-300);
      border-radius: var(--radius-sm);
      cursor: pointer;
      position: relative;
      background: var(--color-gray-0);
      transition: var(--transition-fast);
    }

    .task-checkbox.completed {
      background: var(--color-success-600);
      border-color: var(--color-success-600);
    }

    .task-checkbox.completed::after {
      content: '‚úì';
      position: absolute;
      color: var(--color-gray-0);
      font-size: 12px;
      font-weight: bold;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .task-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--space-1);
    }

    .task-title {
      font-weight: var(--font-weight-medium);
      color: var(--color-gray-900);
      margin: 0;
    }

    .task-title.completed {
      text-decoration: line-through;
      color: var(--color-gray-500);
    }

    .task-meta {
      display: flex;
      gap: var(--space-2);
      align-items: center;
    }

    .priority-high { background-color: var(--color-error-50); color: var(--color-error-700); }
    .priority-medium { background-color: var(--color-warning-50); color: var(--color-warning-700); }
    .priority-low { background-color: var(--color-success-50); color: var(--color-success-700); }

    .task-actions {
      display: flex;
      gap: var(--space-2);
      opacity: 0;
      transition: var(--transition-fast);
    }

    .task-item:hover .task-actions {
      opacity: 1;
    }

    .task-action {
      padding: var(--space-1);
      border: none;
      background: transparent;
      border-radius: var(--radius-sm);
      cursor: pointer;
      color: var(--color-gray-500);
      transition: var(--transition-fast);
    }

    .task-action:hover {
      background-color: var(--color-gray-100);
      color: var(--color-gray-700);
    }

    /* Kanban Board */
    .kanban-board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-4);
      min-height: 500px;
    }

    .kanban-column {
      background-color: var(--color-gray-100);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      display: flex;
      flex-direction: column;
    }

    .kanban-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 2px solid var(--color-gray-200);
    }

    .kanban-title {
      font-weight: var(--font-weight-semibold);
      color: var(--color-gray-800);
      margin: 0;
    }

    .kanban-count {
      background-color: var(--color-gray-300);
      color: var(--color-gray-700);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: var(--font-weight-medium);
    }

    .kanban-tasks {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
      min-height: 200px;
    }

    .kanban-task {
      background-color: var(--color-gray-0);
      padding: var(--space-4);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-gray-200);
      cursor: grab;
      transition: var(--transition-fast);
      box-shadow: var(--shadow-xs);
    }

    .kanban-task:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .kanban-task.dragging {
      opacity: 0.5;
      cursor: grabbing;
    }

    .kanban-task .task-title {
      font-size: var(--text-sm);
      margin-bottom: var(--space-2);
    }

    .kanban-drop-zone {
      min-height: 100px;
      border: 2px dashed var(--color-gray-300);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-gray-500);
      font-size: var(--text-sm);
      margin-top: auto;
    }

    .kanban-drop-zone.drag-over {
      border-color: var(--color-primary-500);
      background-color: var(--color-primary-50);
      color: var(--color-primary-600);
    }

    /* Gantt Chart Styles */
    .gantt-chart {
      background: var(--color-gray-0);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .gantt-header {
      border-bottom: 2px solid var(--color-gray-200);
    }

    .gantt-controls {
      padding: var(--space-4);
      background: var(--color-gray-50);
      border-bottom: 1px solid var(--color-gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .gantt-scale-selector {
      display: flex;
      gap: var(--space-2);
    }

    .gantt-timeline {
      overflow-x: auto;
    }

    .gantt-timeline-header {
      display: flex;
      min-width: 800px;
      background: var(--color-gray-100);
      border-bottom: 1px solid var(--color-gray-200);
    }

    .gantt-timeline-cell {
      flex: 1;
      min-width: 100px;
      padding: var(--space-3) var(--space-2);
      text-align: center;
      border-right: 1px solid var(--color-gray-200);
    }

    .gantt-date {
      font-size: var(--text-xs);
      font-weight: var(--font-weight-medium);
      color: var(--color-gray-600);
    }

    .gantt-body {
      max-height: 400px;
      overflow-y: auto;
    }

    .gantt-row {
      display: flex;
      border-bottom: 1px solid var(--color-gray-200);
    }

    .gantt-task-info {
      min-width: 250px;
      padding: var(--space-3);
      background: var(--color-gray-0);
      border-right: 2px solid var(--color-gray-200);
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .gantt-task-title {
      font-size: var(--text-sm);
      font-weight: var(--font-weight-medium);
      color: var(--color-gray-900);
    }

    .gantt-task-meta {
      display: flex;
      gap: var(--space-2);
      align-items: center;
    }

    .gantt-timeline-row {
      flex: 1;
      position: relative;
      min-width: 800px;
      height: 60px;
      background: repeating-linear-gradient(
        to right,
        transparent,
        transparent 99px,
        var(--color-gray-200) 99px,
        var(--color-gray-200) 100px
      );
    }

    .gantt-bar {
      position: absolute;
      height: 30px;
      top: 15px;
      border-radius: var(--radius-sm);
      color: var(--color-gray-0);
      font-size: var(--text-xs);
      font-weight: var(--font-weight-medium);
      display: flex;
      align-items: center;
      padding: 0 var(--space-2);
      cursor: pointer;
      box-shadow: var(--shadow-sm);
      position: relative;
      overflow: hidden;
    }

    .gantt-bar:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    .gantt-bar-content {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .gantt-progress {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      background: rgba(255, 255, 255, 0.3);
      border-radius: var(--radius-sm);
    }

    .status-todo { background-color: var(--color-gray-500); }
    .status-in-progress { background-color: var(--color-primary-500); }
    .status-blocked { background-color: var(--color-red-500); }
    .status-review { background-color: var(--color-yellow-500); }
    .status-done { background-color: var(--color-green-500); }

    /* Energy Section */
    .energy-section .card-body {
      padding: var(--space-6);
    }

    .energy-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
      gap: var(--space-2);
      margin-top: var(--space-4);
    }

    .energy-btn {
      padding: var(--space-3);
      border: 2px solid var(--color-gray-200);
      background-color: var(--color-gray-0);
      border-radius: var(--radius-md);
      font-size: var(--text-xs);
      font-weight: var(--font-weight-medium);
      cursor: pointer;
      transition: var(--transition-fast);
      text-align: center;
    }

    .energy-btn:hover {
      border-color: var(--color-primary-300);
    }

    .energy-btn.active {
      border-color: var(--color-primary-500);
      background-color: var(--color-primary-50);
      color: var(--color-primary-700);
    }

    /* Focus Timer */
    .timer-display {
      font-size: var(--text-4xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-primary-600);
      text-align: center;
      font-family: var(--font-family-mono);
      margin-bottom: var(--space-4);
    }

    .timer-controls {
      display: flex;
      justify-content: center;
      gap: var(--space-3);
    }

    /* Empty states */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--space-12);
      text-align: center;
    }

    .empty-state-icon {
      font-size: var(--text-4xl);
      margin-bottom: var(--space-4);
    }

    .empty-state-title {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-medium);
      color: var(--color-gray-900);
      margin-bottom: var(--space-2);
    }

    .empty-state-text {
      color: var(--color-gray-600);
      margin-bottom: var(--space-6);
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .kanban-board {
        grid-template-columns: 1fr;
        gap: var(--space-6);
      }

      .dashboard-content {
        padding: var(--space-4);
      }
    }

    @media (max-width: 480px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }

      .task-input-row {
        flex-direction: column;
      }

      .dashboard-header {
        padding: var(--space-3);
      }

      .dashboard-actions {
        flex-direction: column;
        gap: var(--space-2);
      }
    }

    /* Hidden utility */
    .hidden {
      display: none !important;
    }
  </style>
</head>
<body class="dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <h1 class="dashboard-title h2">Proactivity Dashboard</h1>
    <div class="dashboard-actions">
      <div class="view-switcher">
        <button id="listViewBtn" class="active">üìã List</button>
        <button id="kanbanViewBtn">üìä Kanban</button>
        <button id="ganttViewBtn">üìà Gantt</button>
      </div>
      <button class="btn btn-secondary btn-sm" id="settingsBtn">‚öôÔ∏è Settings</button>
      <button class="btn btn-secondary btn-sm" id="syncBtn">üîÑ Sync</button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="dashboard-content">
    <!-- Stats Section -->
    <section class="stats-grid">
      <div class="card stat-card">
        <div class="card-body">
          <div class="stat-number" id="totalTasks">0</div>
          <div class="stat-label">Total Tasks</div>
        </div>
      </div>
      <div class="card stat-card">
        <div class="card-body">
          <div class="stat-number" id="completedTasks">0</div>
          <div class="stat-label">Completed</div>
        </div>
      </div>
      <div class="card stat-card">
        <div class="card-body">
          <div class="stat-number" id="focusTime">0m</div>
          <div class="stat-label">Focus Time</div>
        </div>
      </div>
      <div class="card stat-card">
        <div class="card-body">
          <div class="stat-number" id="streakDays">0</div>
          <div class="stat-label">Day Streak</div>
        </div>
      </div>
    </section>

    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- Tasks Section -->
      <section class="tasks-section">
        <div class="card">
                    <div class="card-header">
            <h3 class="h4">Tasks</h3>
            <div class="task-header-actions">
              <button class="btn btn-secondary btn-sm" id="aiHelperBtn" title="AI Task Assistant">
                ü§ñ AI Helper
              </button>
              <button class="btn btn-primary btn-sm" id="addTaskBtn">‚ûï Add Task</button>
            </div>
          </div>
          <div class="card-body">
            <!-- Task Input (initially hidden) -->
            <div class="task-input-row hidden" id="taskInputRow">
              <div class="task-input-grid">
                <input type="text" class="input" id="taskInput" placeholder="What needs to be done?" style="grid-column: span 2;">
                
                <select class="input" id="taskPriority">
                  <option value="low">Low Priority</option>
                  <option value="medium" selected>Medium Priority</option>
                  <option value="high">High Priority</option>
                  <option value="urgent">Urgent</option>
                </select>
                
                <input type="number" class="input" id="taskEstimatedMinutes" placeholder="Minutes" min="5" max="480" step="5" value="30">
                
                <input type="datetime-local" class="input" id="taskStartTime" title="Scheduled start time">
                
                <input type="datetime-local" class="input" id="taskEndTime" title="Scheduled end time">
                
                <button class="btn btn-primary btn-sm" id="saveTaskBtn">üíæ Save</button>
                <button class="btn btn-secondary btn-sm" id="cancelTaskBtn">‚ùå Cancel</button>
              </div>
            </div>

            <!-- List View -->
            <div id="listView" class="tasks-view">
              <div class="tasks-list" id="tasksList">
                <!-- Tasks will be populated here -->
              </div>
            </div>

            <!-- Kanban View -->
            <div id="kanbanView" class="tasks-view hidden">
              <div class="kanban-board">
                <div class="kanban-column" data-status="todo">
                  <div class="kanban-header">
                    <h4 class="kanban-title">To Do</h4>
                    <span class="kanban-count" id="todoCount">0</span>
                  </div>
                  <div class="kanban-tasks" id="todoTasks"></div>
                  <div class="kanban-drop-zone" data-status="todo">Drop tasks here</div>
                </div>
                <div class="kanban-column" data-status="in-progress">
                  <div class="kanban-header">
                    <h4 class="kanban-title">In Progress</h4>
                    <span class="kanban-count" id="inProgressCount">0</span>
                  </div>
                  <div class="kanban-tasks" id="inProgressTasks"></div>
                  <div class="kanban-drop-zone" data-status="in-progress">Drop tasks here</div>
                </div>
                <div class="kanban-column" data-status="done">
                  <div class="kanban-header">
                    <h4 class="kanban-title">Done</h4>
                    <span class="kanban-count" id="doneCount">0</span>
                  </div>
                  <div class="kanban-tasks" id="doneTasks"></div>
                  <div class="kanban-drop-zone" data-status="done">Drop tasks here</div>
                </div>
              </div>
            </div>

            <!-- Gantt View -->
            <div id="ganttView" class="tasks-view hidden">
              <div class="gantt-chart" id="ganttChart">
                <!-- Gantt chart will be populated here -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sidebar -->
      <aside>
        <!-- Energy Level -->
        <section class="card energy-section" style="margin-bottom: var(--space-6);">
          <div class="card-header">
            <h3 class="h4">Energy Level</h3>
          </div>
          <div class="card-body">
            <p class="text-sm" style="color: var(--color-gray-600); margin-bottom: var(--space-4);">
              Current: <span id="currentEnergyDisplay" style="font-weight: var(--font-weight-medium);">Medium</span>
            </p>
            <div class="energy-buttons">
              <button class="energy-btn" data-energy="1">üò¥ Depleted</button>
              <button class="energy-btn" data-energy="2">ü™´ Low</button>
              <button class="energy-btn" data-energy="3">üîã Medium</button>
              <button class="energy-btn" data-energy="4">‚ö° High</button>
              <button class="energy-btn" data-energy="5">üöÄ Peak</button>
            </div>
          </div>
        </section>

        <!-- Focus Timer -->
        <section class="card">
          <div class="card-header">
            <h3 class="h4">Focus Timer</h3>
          </div>
          <div class="card-body">
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="timer-controls">
              <button class="btn btn-primary btn-sm" id="startTimer">‚ñ∂Ô∏è Start</button>
              <button class="btn btn-secondary btn-sm" id="pauseTimer">‚è∏Ô∏è Pause</button>
              <button class="btn btn-secondary btn-sm" id="stopTimer">‚èπÔ∏è Stop</button>
            </div>
          </div>
        </section>
      </aside>
    </div>
  </main>

  <!-- AI Helper Modal -->
  <div id="aiHelperModal" class="modal hidden">
    <div class="modal-overlay" onclick="dashboard.hideAiHelper()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">ü§ñ AI Task Assistant</h3>
        <button class="modal-close" onclick="dashboard.hideAiHelper()">‚úï</button>
      </div>
      <div class="modal-body">
        <p class="ai-helper-description">
          Tell me about a complex task you're struggling with, and I'll break it down into ADHD-friendly micro-tasks with clear, actionable steps.
        </p>
        
        <div class="ai-input-section">
          <label for="aiTaskInput" class="input-label">What task would you like help with?</label>
          <textarea id="aiTaskInput" class="input" rows="4" 
                    placeholder="Example: Write the methodology section for my dissertation chapter on climate change impacts"></textarea>
        </div>
        
        <div class="ai-context-section">
          <h4>Context (optional but helpful)</h4>
          <div class="ai-context-grid">
            <div class="ai-context-field">
              <label for="aiAvailableTime" class="input-label">Available Time</label>
              <select id="aiAvailableTime" class="input">
                <option value="15">15 minutes</option>
                <option value="30" selected>30 minutes</option>
                <option value="60">1 hour</option>
                <option value="120">2 hours</option>
                <option value="240">4+ hours</option>
              </select>
            </div>
            <div class="ai-context-field">
              <label for="aiEnergyLevel" class="input-label">Current Energy</label>
              <select id="aiEnergyLevel" class="input">
                <option value="1">üò¥ Depleted</option>
                <option value="2">ü™´ Low</option>
                <option value="3" selected>üîã Medium</option>
                <option value="4">‚ö° High</option>
                <option value="5">üöÄ Peak</option>
              </select>
            </div>
            <div class="ai-context-field">
              <label for="aiComplexity" class="input-label">Preferred Complexity</label>
              <select id="aiComplexity" class="input">
                <option value="micro">Micro tasks (5-15min)</option>
                <option value="simple" selected>Simple tasks (15-30min)</option>
                <option value="moderate">Moderate tasks (30-60min)</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="ai-challenges-section">
          <label class="input-label">Executive Function Challenges (check any that apply)</label>
          <div class="ai-challenges-grid">
            <label class="checkbox-label">
              <input type="checkbox" value="working_memory"> Working Memory
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="task_initiation"> Task Initiation
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="planning"> Planning
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="time_management"> Time Management
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="sustained_attention"> Sustained Attention
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="organization"> Organization
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="dashboard.hideAiHelper()">Cancel</button>
        <button class="btn btn-primary" id="generateAiTasksBtn" onclick="dashboard.generateAiTasks()">
          ‚ú® Generate ADHD-Friendly Tasks
        </button>
      </div>
    </div>
  </div>

  <!-- AI Results Modal -->
  <div id="aiResultsModal" class="modal hidden">
    <div class="modal-overlay" onclick="dashboard.hideAiResults()"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 class="modal-title">üéØ Your ADHD-Friendly Task Breakdown</h3>
        <button class="modal-close" onclick="dashboard.hideAiResults()">‚úï</button>
      </div>
      <div class="modal-body">
        <div id="aiResultsContent">
          <!-- AI-generated tasks will be populated here -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="dashboard.hideAiResults()">Close</button>
        <button class="btn btn-primary" id="addAiTasksBtn" onclick="dashboard.addAiGeneratedTasks()">
          ‚ûï Add Selected Tasks
        </button>
      </div>
    </div>
  </div>

  <script src="theme-manager.js"></script>
  <script src="dashboard.js"></script>
  <script>
    // Initialize theme toggle in header after DOM loads
    document.addEventListener('DOMContentLoaded', () => {
      window.themeManager.initializeThemeToggle('.dashboard-actions');
    });
  </script>
</body>
</html>